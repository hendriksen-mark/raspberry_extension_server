import{r as i,j as e,F as m,G as p,a as k,n as j}from"./index.js";import{G as u}from"./GenericText.js";import{G as h}from"./GlassContainer.js";import{P as g}from"./PageContent.js";import{C as G}from"./CardGrid.js";const q=({HOST_IP:v,API_KEY:T,CONFIG:o})=>{const[b,f]=i.useState(!1),[l,P]=i.useState({enabled:o.config.port.enabled,ports:o.config.port.ports}),[c,R]=i.useState({yeelight:o.config.yeelight.enabled,native_multi:o.config.native_multi.enabled,tasmota:o.config.tasmota.enabled,wled:o.config.wled.enabled,shelly:o.config.shelly.enabled,esphome:o.config.esphome.enabled,hyperion:o.config.hyperion.enabled,tpkasa:o.config.tpkasa.enabled,elgato:o.config.elgato.enabled}),[r,x]=i.useState({IP_RANGE_START:o.config.IP_RANGE.IP_RANGE_START,IP_RANGE_END:o.config.IP_RANGE.IP_RANGE_END,SUB_IP_RANGE_START:o.config.IP_RANGE.SUB_IP_RANGE_START,SUB_IP_RANGE_END:o.config.IP_RANGE.SUB_IP_RANGE_END}),[_,E]=i.useState(o.config.scanonhostip),[t,N]=i.useState(o.config.ipaddress.replace("http://",""));i.useEffect(()=>{b||(P({enabled:o.config.port.enabled,ports:o.config.port.ports}),R({yeelight:o.config.yeelight.enabled,native_multi:o.config.native_multi.enabled,tasmota:o.config.tasmota.enabled,wled:o.config.wled.enabled,shelly:o.config.shelly.enabled,esphome:o.config.esphome.enabled,hyperion:o.config.hyperion.enabled,tpkasa:o.config.tpkasa.enabled,elgato:o.config.elgato.enabled}),x({IP_RANGE_START:o.config.IP_RANGE.IP_RANGE_START,IP_RANGE_END:o.config.IP_RANGE.IP_RANGE_END,SUB_IP_RANGE_START:o.config.IP_RANGE.SUB_IP_RANGE_START,SUB_IP_RANGE_END:o.config.IP_RANGE.SUB_IP_RANGE_END}),E(o.config.scanonhostip),N(o.config.ipaddress.replace("http://","")))},[o,b]);const S=(s,n)=>{P(a=>({...a,[s]:n})),f(!0)},y=(s,n)=>{R(a=>({...a,[s]:n})),f(!0)},A=(s,n)=>{const[a,D]=s.split(".").slice(2).map(Number);x(w=>({...w,[n==="start"?"SUB_IP_RANGE_START":"SUB_IP_RANGE_END"]:a,[n==="start"?"IP_RANGE_START":"IP_RANGE_END"]:D})),f(!0)},d=(s,n)=>{k.put(`${v}/api/${T}/config`,s).then(()=>j.success(n)).catch(a=>j.error(`Error occurred: ${a.message}`))},I=()=>{d({port:{enabled:l.enabled,ports:l.ports.toString().match(/\d+/g).map(Number)}},"Port configuration saved successfully")},$=()=>{d({...Object.keys(c).reduce((s,n)=>({...s,[n]:{enabled:c[n]}}),{})},"Protocol configuration saved successfully")},B=()=>{d({IP_RANGE:r},"IP range configuration saved successfully")},U=()=>{d({scanonhostip:_},"Scan on host IP configuration saved successfully")};return e.jsx("div",{className:"inner",children:e.jsxs(G,{options:"main",children:[e.jsx(h,{options:"spacer",children:e.jsxs(g,{children:[e.jsx("div",{className:"headline",children:"Add extra port for searching"}),e.jsx("p",{children:"This wil make the bridge search on other ports."}),e.jsx("p",{children:"If disabled the bridge wil only search on port 80."}),e.jsx("p",{children:"The standard port is 80, always include port 80."}),e.jsx("p",{children:'To add ports separate the ports with "," ex: 80,81,82'}),e.jsxs("form",{className:"add-form",children:[e.jsx("div",{className:"form-control",children:e.jsx(m,{id:"ports",value:l.enabled,onChange:s=>S("enabled",s),checked:l.enabled,label:"Enable",position:"right"})}),e.jsx("div",{className:"form-control",children:e.jsx(u,{label:"Port",type:"text",placeholder:"Additional ports",value:l.ports,onChange:s=>S("ports",s)})}),e.jsx("div",{className:"form-control",children:e.jsx(p,{value:"Save",color:"blue",size:"",type:"submit",onClick:I})})]})]})}),e.jsx(h,{options:"spacer",children:e.jsxs(g,{children:[e.jsx("div",{className:"headline",children:"Search IP Range Config"}),e.jsx("p",{children:"Set IP range for light search."}),e.jsx(u,{label:`IP Range Start (you can change ${t.split(".")[0]}.${t.split(".")[1]}.xxx.yyy)`,type:"text",value:`${t.split(".")[0]}.${t.split(".")[1]}.${r.SUB_IP_RANGE_START}.${r.IP_RANGE_START}`,onChange:s=>A(s,"start")}),e.jsx(u,{label:`IP Range End (you can change ${t.split(".")[0]}.${t.split(".")[1]}.XXX.YYY)`,type:"text",value:`${t.split(".")[0]}.${t.split(".")[1]}.${r.SUB_IP_RANGE_END}.${r.IP_RANGE_END}`,onChange:s=>A(s,"end")}),e.jsx("div",{className:"form-control",children:e.jsx(p,{value:"Save",color:"blue",size:"",type:"submit",onClick:B})})]})}),e.jsx(h,{options:"spacer",children:e.jsxs(g,{children:[e.jsx("div",{className:"headline",children:"Search Protocol Config"}),e.jsx("p",{children:"Set which protocol to find."}),e.jsx("form",{className:"add-form",children:Object.keys(c).map(s=>e.jsx(m,{id:s,value:c[s],onChange:n=>y(s,n),checked:c[s],label:s.charAt(0).toUpperCase()+s.slice(1),position:"right"},s))}),e.jsx("div",{className:"form-control",children:e.jsx(p,{value:"Save",color:"blue",size:"",type:"submit",onClick:$})})]})}),e.jsx(h,{options:"spacer",children:e.jsxs(g,{children:[e.jsx("div",{className:"headline",children:"Search on host IP"}),e.jsxs("form",{className:"add-form",children:[e.jsx(m,{id:"ScanOnHostIP",value:_,onChange:s=>E(s),checked:_,label:"Enable",position:"right"}),e.jsx(p,{value:"Save",color:"blue",size:"",type:"submit",onClick:U})]})]})})]})})};export{q as default};
