import{c as h,j as e,e as m,F as f,T as j,b as p,a as d,n,r as x}from"./index.js";import{C as g}from"./CardGrid.js";import{I as b}from"./IconButton.js";import{G as y}from"./GlassContainer.js";import{c as z}from"./reactConfirmAlert.js";function M(s){return h({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 16c-.552 0-1-.447-1-1v-4c0-.553.448-1 1-1s1 .447 1 1v4c0 .553-.448 1-1 1zM6 16c-.552 0-1-.447-1-1v-4c0-.553.448-1 1-1s1 .447 1 1v4c0 .553-.448 1-1 1zM15 16c-.552 0-1-.447-1-1v-4c0-.553.448-1 1-1s1 .447 1 1v4c0 .553-.448 1-1 1zM12 16c-.552 0-1-.447-1-1v-4c0-.553.448-1 1-1s1 .447 1 1v4c0 .553-.448 1-1 1zM19 10c0-1.654-1.346-3-3-3h-11c-1.654 0-3 1.346-3 3v6c0 1.654 1.346 3 3 3h11c1.654 0 3-1.346 3-3 1.104 0 2-.896 2-2v-2c0-1.104-.896-2-2-2zm-2 6c0 .552-.449 1-1 1h-11c-.551 0-1-.448-1-1v-6c0-.552.449-1 1-1h11c.551 0 1 .448 1 1v6z"},child:[]}]})(s)}function w(s){return h({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 16c-.552 0-1-.447-1-1v-4c0-.553.448-1 1-1s1 .447 1 1v4c0 .553-.448 1-1 1zM6 16c-.552 0-1-.447-1-1v-4c0-.553.448-1 1-1s1 .447 1 1v4c0 .553-.448 1-1 1zM12 16c-.552 0-1-.447-1-1v-4c0-.553.448-1 1-1s1 .447 1 1v4c0 .553-.448 1-1 1zM19 10c0-1.654-1.346-3-3-3h-11c-1.654 0-3 1.346-3 3v6c0 1.654 1.346 3 3 3h11c1.654 0 3-1.346 3-3 1.104 0 2-.896 2-2v-2c0-1.104-.896-2-2-2zm-2 6c0 .552-.449 1-1 1h-11c-.551 0-1-.448-1-1v-6c0-.552.449-1 1-1h11c.551 0 1 .448 1 1v6z"},child:[]}]})(s)}function D(s){return h({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 16c-.552 0-1-.447-1-1v-4c0-.553.448-1 1-1s1 .447 1 1v4c0 .553-.448 1-1 1zM19 10c0-1.654-1.346-3-3-3h-11c-1.654 0-3 1.346-3 3v6c0 1.654 1.346 3 3 3h11c1.654 0 3-1.346 3-3 1.104 0 2-.896 2-2v-2c0-1.104-.896-2-2-2zm-2 6c0 .552-.449 1-1 1h-11c-.551 0-1-.448-1-1v-6c0-.552.449-1 1-1h11c.551 0 1 .448 1 1v6z"},child:[]}]})(s)}function B(s){return h({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 16c-.552 0-1-.447-1-1v-4c0-.553.448-1 1-1s1 .447 1 1v4c0 .553-.448 1-1 1zM6 16c-.552 0-1-.447-1-1v-4c0-.553.448-1 1-1s1 .447 1 1v4c0 .553-.448 1-1 1zM19 10c0-1.654-1.346-3-3-3h-11c-1.654 0-3 1.346-3 3v6c0 1.654 1.346 3 3 3h11c1.654 0 3-1.346 3-3 1.104 0 2-.896 2-2v-2c0-1.104-.896-2-2-2zm-2 6c0 .552-.449 1-1 1h-11c-.551 0-1-.448-1-1v-6c0-.552.449-1 1-1h11c.551 0 1 .448 1 1v6z"},child:[]}]})(s)}const N=({HOST_IP:s,api_key:i,id:r,device:c})=>{const v=()=>{z({title:"Delete device "+c.name,message:"Are you sure to do this?",buttons:[{label:"Yes",onClick:()=>l()},{label:"No"}]})},l=()=>{d.delete(`${s}/api/${i}/sensors/${r}`).then(t=>{n.success("Device successfully deleted")}).catch(t=>{console.error(t),n.error("Error occured, check browser console")})},a=t=>{d.put(`${s}/api/${i}/sensors/${r}/config`,{on:t}).then(o=>{n.success(c.name+" successfully "+(t?"enabled":"disabled"))}).catch(o=>{console.error(o),n.error("Error occured, check browser console")})},u=()=>{let t=c.config.battery,o=t+"%";return t>90?e.jsx(M,{color:"#27ae60",title:o}):t>70?e.jsx(w,{color:"#1abc9c",title:o}):t>40?e.jsx(B,{color:"#e67e22",title:o}):e.jsx(D,{color:"#e74c3c",title:o})};return e.jsx(y,{children:e.jsxs("div",{className:"top",children:[e.jsxs("div",{className:"row1",children:[e.jsx("div",{className:"icon",children:e.jsx(m,{})}),e.jsx("div",{className:"text",children:c.name}),e.jsx(f,{id:"device "+r,onChange:t=>a(t),checked:c.config.on})]}),e.jsx("div",{className:"row2",children:e.jsxs("ul",{children:[e.jsxs("li",{children:["ModelID: ",c.modelid]}),e.jsxs("li",{children:["Type: ",c.type]}),e.jsxs("li",{children:["Protocol: ",c.protocol]}),e.jsxs("li",{children:["Last Active: ",c.state.lastupdated.replace(/T|Z|\.\d+/g," ")]})]})}),e.jsxs("div",{className:"row2",children:["battery"in c.config&&e.jsx(j,{title:e.jsx("p",{style:{fontSize:"18px"},children:c.config.battery+"%"}),arrow:!0,children:e.jsx("div",{className:"battery",children:u()})}),e.jsx(b,{iconName:p,title:"Delete",size:"small",color:"red",onClick:()=>v()})]})]})})},C=({HOST_IP:s,API_KEY:i,CONFIG:r})=>{const[c,v]=x.useState(r.sensors);return x.useEffect(()=>{v(r.sensors)},[r.sensors]),e.jsx("div",{className:"content",children:e.jsx("div",{className:"inner",children:e.jsx(g,{children:Object.entries(c).map(([l,a])=>a.protocol!=="none"&&e.jsx(N,{HOST_IP:s,api_key:i,id:l,device:a},l))})})})};export{C as default};
