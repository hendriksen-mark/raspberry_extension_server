import{r,j as t,F as H,G as J,a as K,n as C}from"./index.js";import{G as o}from"./GenericText.js";import{G as L}from"./GlassContainer.js";import{P as V}from"./PageContent.js";import{C as W}from"./CardGrid.js";const F=({HOST_IP:D,API_KEY:U,CONFIG:s})=>{var g,j,M,P,T,b;const[n,c]=r.useState(((g=s.config.mqtt)==null?void 0:g.enabled)||!1),[i,l]=r.useState(((j=s.config.mqtt)==null?void 0:j.mqttServer)||"mqtt"),[m,d]=r.useState(((M=s.config.mqtt)==null?void 0:M.mqttPort)||1883),[f,h]=r.useState(((P=s.config.mqtt)==null?void 0:P.mqttUser)||""),[q,u]=r.useState(((T=s.config.mqtt)==null?void 0:T.mqttPassword)||""),[x,p]=r.useState(((b=s.config.mqtt)==null?void 0:b.discoveryPrefix)||"homeassistant"),[v,a]=r.useState(!1);r.useEffect(()=>{var e,S,y,Q,w,E;v||(c(((e=s.config.mqtt)==null?void 0:e.enabled)||!1),l(((S=s.config.mqtt)==null?void 0:S.mqttServer)||"mqtt"),d(((y=s.config.mqtt)==null?void 0:y.mqttPort)||1883),h(((Q=s.config.mqtt)==null?void 0:Q.mqttUser)||""),u(((w=s.config.mqtt)==null?void 0:w.mqttPassword)||""),p(((E=s.config.mqtt)==null?void 0:E.discoveryPrefix)||"homeassistant"))},[s,v]);const $=e=>{c(e),a(!0)},k=e=>{l(e),a(!0)},B=e=>{d(parseInt(e)),a(!0)},z=e=>{h(e),a(!0)},R=e=>{u(e),a(!0)},Z=e=>{p(e),a(!0)},A=()=>{K.put(`${D}/api/${U}/config`,{mqtt:{enabled:n,mqttServer:i,mqttPort:m,mqttUser:f,mqttPassword:q,discoveryPrefix:x}}).then(e=>{C.success("Successfully saved, please restart the service")}).catch(e=>{console.error(e),C.error(`Error occurred: ${e.message}`)})};return t.jsx("div",{className:"inner",children:t.jsx(W,{options:"main",children:t.jsx(L,{children:t.jsxs(V,{children:[t.jsx("div",{className:"headline",children:"ZigBee2MQTT config"}),t.jsxs("form",{className:"add-form",children:[t.jsx(H,{id:"mqtt",value:n,onChange:e=>$(e),checked:n,label:"Enable",position:"right"}),t.jsx("div",{className:"form-control",children:t.jsx(o,{label:"MQTT server",type:"text",placeholder:"MQTT server",value:i,onChange:e=>k(e)})}),t.jsx("div",{className:"form-control",children:t.jsx(o,{label:"MQTT port",type:"number",placeholder:"MQTT port",value:m,onChange:e=>B(e)})}),t.jsx("div",{className:"form-control",children:t.jsx(o,{label:"MQTT username",type:"text",placeholder:"MQTT username",value:f,onChange:e=>z(e)})}),t.jsx("div",{className:"form-control",children:t.jsx(o,{label:"MQTT password",type:"password",placeholder:"MQTT password",value:q,onChange:e=>R(e)})}),t.jsx("div",{className:"form-control",children:t.jsx(o,{label:"Discovery Prefix",type:"text",placeholder:"Discovery prefix",value:x,onChange:e=>Z(e)})}),t.jsx("div",{className:"form-control",children:t.jsx(J,{value:"Save",color:"blue",size:"",type:"submit",onClick:()=>A()})})]})]})})})})};export{F as default};
