import{r as i,j as a,F as g,G as v,a as E,n as h}from"./index.js";import{G as S}from"./GenericText.js";import{G as C}from"./GlassContainer.js";import{P as y}from"./PageContent.js";import{C as G}from"./CardGrid.js";const w=({HOST_IP:u,API_KEY:x,CONFIG:s})=>{var m,d;const[l,o]=i.useState(((m=s.config.alarm)==null?void 0:m.enabled)||!1),[t,r]=i.useState(((d=s.config.alarm)==null?void 0:d.email)||""),[c,n]=i.useState(!1);i.useEffect(()=>{var e,f;c||(o(((e=s.config.alarm)==null?void 0:e.enabled)||!1),r(((f=s.config.alarm)==null?void 0:f.email)||""))},[s,c]);const p=e=>{o(e),n(!0)},j=e=>{r(e),n(!0)},b=()=>{E.put(`${u}/api/${x}/config`,{alarm:{enabled:l,email:t}}).then(e=>{h.success("Successfully saved"),n(!1)}).catch(e=>{console.error(e),h.error(`Error: ${e.message}`)})};return a.jsx("div",{className:"inner",children:a.jsx(G,{options:"main",children:a.jsx(C,{children:a.jsxs(y,{children:[a.jsx("div",{className:"headline",children:"Motion notifications alarm"}),a.jsxs("form",{className:"add-form",children:[a.jsx(g,{id:"alarm",value:l,onChange:e=>p(e),checked:l,label:"Enable",position:"right"}),a.jsx("div",{className:"form-control",children:a.jsx(S,{label:"e-mail",type:"text",placeholder:"Notification email",value:t,onChange:e=>j(e)})}),a.jsx("div",{className:"form-control",children:a.jsx(v,{value:"Save",color:"blue",size:"",type:"submit",onClick:e=>b()})})]})]})})})})};export{w as default};
