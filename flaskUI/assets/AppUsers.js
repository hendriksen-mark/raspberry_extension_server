import{r as o,j as e,b as U,W as g,G as k,a as y,n as p}from"./index.js";import{C as D}from"./CardGrid.js";import{R as w}from"./index2.js";import{I as A}from"./IconButton.js";import{G as O}from"./GlassContainer.js";import{c as m}from"./reactConfirmAlert.js";const G=({HOST_IP:i,api_key:u,id:n,user:t,whitelist:l})=>{const[c,d]=o.useState(!1),[f,x]=o.useState(""),[j,b]=o.useState({}),[a,C]=o.useState(t);o.useEffect(()=>{C(t)},[t]);const W=()=>{a.name==="WebUi"?m({title:"Delete User "+a.name+" not allowed",message:"This can't be done",buttons:[{label:"Back"}]}):m({title:"Delete User "+a.name,message:"Are you sure to do this?",buttons:[{label:"Yes transfer",onClick:()=>v()},{label:"No"}]})},z=s=>{y.delete(`${i}/api/${s}/config/whitelist/${n}`).then(r=>{p.success("User successfully deleted")}).catch(r=>{console.error(r),p.error(`Error occurred: ${r.message}`)}),h(!0)},N=()=>{d(!0)},h=(s=!1)=>{s?d(!1):m({title:"Confirm to close",message:"You have unsaved changes. Are you sure you want to close?",buttons:[{label:"Yes",onClick:()=>d(!1)},{label:"No",onClick:()=>{}}]})},v=()=>{x("Transfer ownership to other user."),b(e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Are you sure to do this?"}),Object.entries(l).filter(s=>s[1].name!==t.name).map(([s,r])=>e.jsx("div",{className:"form-control",children:e.jsx(k,{value:r.name,color:"blue",size:"",type:"submit",onClick:()=>z(s)})},s))]})),N()};return e.jsx(O,{children:e.jsxs("div",{className:"top",children:[e.jsxs("div",{className:"row1",children:[e.jsx("div",{className:"icon",children:e.jsx(w,{})}),e.jsx("div",{className:"text",children:a.name})]}),e.jsxs("div",{className:"row2",children:[e.jsxs("ul",{children:[e.jsxs("li",{children:["Last use date: ",a["last use date"].replace("T"," ")]}),e.jsxs("li",{children:["Create date: ",a["create date"].replace("T"," ")]})]}),a.name!=="WebUi"&&e.jsx(A,{iconName:U,title:"Delete",size:"small",color:"red",onClick:()=>W()})]}),e.jsx(g,{isOpen:c,closeWizard:()=>h(!1),headline:f,children:j})]})})},F=({HOST_IP:i,API_KEY:u,CONFIG:n})=>{const t=n.apiUsers;return e.jsx("div",{className:"inner",children:e.jsx(D,{children:Object.entries(t).map(([l,c])=>e.jsx(G,{HOST_IP:i,api_key:u,id:l,user:c,whitelist:t},l))})})};export{F as default};
