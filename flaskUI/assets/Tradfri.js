import{r as t,j as r,G as k,a as G,n as d}from"./index.js";import{G as i}from"./GenericText.js";import{G as S}from"./GlassContainer.js";import{P as K}from"./PageContent.js";import{C as A}from"./CardGrid.js";const Y=({HOST_IP:C,API_KEY:L,CONFIG:a})=>{var u,g,y,j;const[n,c]=t.useState(((u=a.config.tradfri)==null?void 0:u.tradfriGwIp)||"192.168.x.x"),[l,f]=t.useState(((g=a.config.tradfri)==null?void 0:g.tradfriCode)||""),[p,h]=t.useState(((y=a.config.tradfri)==null?void 0:y.identity)||""),[s,x]=t.useState(((j=a.config.tradfri)==null?void 0:j.psk)||""),[m,o]=t.useState(!1);t.useEffect(()=>{var e,v,T,w;m||(c(((e=a.config.tradfri)==null?void 0:e.tradfriGwIp)||"192.168.x.x"),f(((v=a.config.tradfri)==null?void 0:v.tradfriCode)||""),h(((T=a.config.tradfri)==null?void 0:T.identity)||""),x(((w=a.config.tradfri)==null?void 0:w.psk)||""))},[a,m]);const b=e=>{c(e),o(!0)},P=e=>{f(e),o(!0)},E=e=>{h(e),o(!0)},I=()=>{G.post(`${C}/tradfri`,{identity:p,tradfriGwIp:n,tradfriCode:l},{timeout:2e3}).then(e=>{e.data.result==="success"?(x(e.data.psk.success),d.success("Connected, now search for lights")):d.error("Error:"+e.data.result)}).catch(e=>{console.error(e),d.error(`Error occurred: ${e.message}`)})};return r.jsx("div",{className:"inner",children:r.jsx(A,{options:"main",children:r.jsx(S,{children:r.jsxs(K,{children:[r.jsx("div",{className:"headline",children:"IKEA Tradfri Gateway"}),r.jsxs("form",{className:"add-form",children:[r.jsx("div",{className:"form-control",children:r.jsx(i,{label:"Tradfri Gateway IP",type:"text",placeholder:"192.168.x.x",value:n,onChange:e=>b(e)})}),r.jsx("div",{className:"form-control",children:r.jsx(i,{label:"Identity",type:"text",placeholder:"Identity used for pairing",value:p,onChange:e=>E(e)})}),s===""&&r.jsx("div",{className:"form-control",children:r.jsx(i,{label:"Security Code",type:"password",placeholder:"Located on gateway label",value:l,onChange:e=>P(e)})}),s!==""&&r.jsx("div",{className:"form-control",children:r.jsx(i,{label:"Paired Key",type:"text",readOnly:!0,placeholder:"Located on gateway label",value:s})}),r.jsx("div",{className:"form-control",children:r.jsx(k,{value:typeof s=="string"&&s.length>0?"Change Ip":"Pair",color:"blue",size:"",type:"submit",onClick:()=>I()})})]})]})})})})};export{Y as default};
